<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hacker Terminal — Demo C2 UI (Safe Demo)</title>
<link href="https://db.onlinewebfonts.com/c/0bae535590ffdc6ffb2cfa45b8fb2ae3?family=PxPlus+IBM+VGA8" rel="stylesheet">
<style>
  :root{
    --bg:#071013;
    --panel:#04110b;
    --muted:#7ef0a5;
    --accent:#39ff14;
    --glass: rgba(255,255,255,0.03);
    --panel-2:#0a1612;
  }
  html,body{height:100%;margin:0;font-family:'PxPlus IBM VGA8', monospace;background:linear-gradient(180deg,#001011 0%,var(--bg) 60%);color:#9fffb1;overflow:hidden;}
  /* hide scrollbars but keep scrolling */
  *::-webkit-scrollbar { display: none; }
  * { scrollbar-width: none; -ms-overflow-style: none; }

  .app{
    display:grid;
    grid-template-columns: 340px 1fr 420px;
    grid-template-rows: 64px 1fr;
    gap:12px;
    padding:16px;
    height:100vh;
    box-sizing:border-box;
  }

  /* Top bar */
  .topbar{
    grid-column:1/-1;
    background:linear-gradient(90deg, rgba(0,0,0,0.35), rgba(255,255,255,0.02));
    border-radius:8px;
    display:flex;
    align-items:center;
    padding:12px 18px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
    gap:12px;
  }
  .logo{display:flex;align-items:center;gap:10px;font-weight:600;color:var(--accent)}
  .logo .dot{width:10px;height:10px;border-radius:50%;background:var(--muted);box-shadow:0 0 8px var(--muted);}
  .top-actions{margin-left:auto;display:flex;gap:8px;align-items:center}
  .btn{background:var(--glass);padding:8px 12px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);cursor:pointer;color:inherit;font-size:13px}
  .status-pill{background:#001a14;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,0.02);font-size:13px}

  /* Sidebar (left) */
  .sidebar{
    background:linear-gradient(180deg,var(--panel-2),rgba(0,0,0,0.06));
    border-radius:8px;padding:12px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);
    overflow:auto;
    -webkit-overflow-scrolling: touch;
  }
  .sidebar h3{margin:6px 0 10px;color:var(--muted);font-weight:600}
  .filter{display:flex;flex-direction:column;gap:8px}
  .chip{display:inline-block;padding:6px 10px;border-radius:6px;background:transparent;border:1px solid rgba(255,255,255,0.03);font-size:13px;cursor:pointer;color: inherit;}
  .search{display:flex;margin-bottom:10px}
  .search input{outline:none;flex:1;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit;font-family:PxPlus IBM VGA8}

  /* Task Manager style resource area */
  .sys-res{
    margin-top:12px;padding:10px;border-radius:8px;background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.02));
    border:1px solid rgba(255,255,255,0.02);
  }
  .sys-res .title{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-weight:600}
  .res-agg{margin-top:10px}
  .bar-bg{background:#001a14;border-radius:6px;height:10px;overflow:hidden}
  .bar-fill{height:10px;background:var(--accent);width:0%;transition:width 600ms ease}
  .bar-fill-mem{background:#7ef0a5}
  .agent-row{display:flex;align-items:center;justify-content:space-between;padding:8px 6px;border-top:1px dashed rgba(255,255,255,0.02)}
  .agent-row:first-of-type{border-top:none}
  .agent-name{display:flex;align-items:center;gap:8px}
  .agent-mini-dot{width:9px;height:9px;border-radius:50%}
  .proc-table{width:100%;margin-top:10px;border-collapse:collapse;font-size:13px}
  .proc-table thead th{font-weight:600;color:#9fffb1;text-align:left;padding:6px;border-bottom:1px dashed rgba(255,255,255,0.03)}
  .proc-table td{padding:6px;border-bottom:1px dotted rgba(255,255,255,0.02)}
  .proc-pid{color:#9adfa3;width:60px}
  .proc-cpu{width:70px;text-align:right}
  .proc-mem{width:70px;text-align:right}

  /* Main */
  .main{
    background:linear-gradient(180deg, rgba(0,0,0,0.18), rgba(255,255,255,0.01));
    border-radius:8px;padding:12px;overflow:auto;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    -webkit-overflow-scrolling: touch;
  }
  .panel-title{display:flex;align-items:center;gap:12px}
  .panel-title h2{margin:0;font-weight:600;color:var(--muted)}
  .agents-table{width:100%;margin-top:12px;border-collapse:collapse}
  .agents-table thead th{color:#68ff8f;font-weight:600;text-align:left;padding:10px 8px;border-bottom:1px dashed rgba(255,255,255,0.03)}
  .agents-table tbody tr{cursor:pointer}
  .agents-table tbody td{padding:10px 8px;border-bottom:1px dotted rgba(255,255,255,0.02)}
  .status-dot{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:8px}
  .online{background: #39ff14; box-shadow: 0 0 6px #39ff14}
  .offline{background: #6b6b6b}
  .muted{color:#6ea88b;font-size:13px}

  /* Right column – terminal/logs */
  .right{
    background:linear-gradient(180deg,#00120f,#001814);
    border-radius:8px;padding:12px;overflow:auto;box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);
    -webkit-overflow-scrolling: touch;
  }
  .terminal{
    background:linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.05));
    border-radius:6px;padding:12px;height:46vh;overflow:auto;border:1px solid rgba(57,255,20,0.04);
    font-size:13px;line-height:1.4;color:var(--muted);
    -webkit-overflow-scrolling: touch;
  }
  .terminal .line{white-space:pre-wrap}
  .input-row{display:flex;gap:8px;margin-top:10px}
  .cmd-input{flex:1;padding:10px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit;font-family:PxPlus IBM VGA8;outline: none;}
  .run-btn{padding:10px 14px;border-radius:6px;background:transparent;border:1px solid rgba(255,255,255,0.02);cursor:pointer}

  /* small panels */
  .mini{
    background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.02));
    border-radius:8px;padding:10px;margin-top:12px;border:1px solid rgba(255,255,255,0.02)
  }
  .kv{display:flex;justify-content:space-between;font-size:13px;padding:6px 0;border-bottom:1px dashed rgba(255,255,255,0.02)}
  .kv:last-child{border-bottom:none}

  /* responsive */
  @media(max-width:1100px){
    .app{grid-template-columns:1fr;grid-template-rows:auto auto auto; padding:10px}
    .right{order:3}
  }

  /* Terminal cursor effect */
  .cursor{display:inline-block;width:8px;height:16px;background:var(--accent);margin-left:6px;animation:blink 1s steps(2,end) infinite;vertical-align:bottom}
  @keyframes blink{50%{opacity:0}}

  /* CPU / Memory bars visual tweaks */
  .bar-fill{transition:width 600ms ease}
  .bar-fill-mem{transition:width 600ms ease}

  /* overlay (boot/login) */
  .overlay{
    position:fixed;left:0;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;
    background:linear-gradient(180deg,rgba(0,0,0,0.75),rgba(0,0,0,0.85));
    z-index:9999;color:var(--muted);flex-direction:column;
  }
  .boot-box{
    background:transparent;border:2px solid rgba(57,255,20,0.06);padding:30px 40px;border-radius:8px;min-width:540px;text-align:center;
    box-shadow: 0 20px 60px rgba(0,0,0,0.6);
  }
  .boot-line{font-size:20px;letter-spacing:2px;margin-bottom:18px}
  .boot-prompt{font-size:16px;color:#9fffb1;margin-bottom:12px}
  .pwd-input{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 12px;border-radius:6px;color:var(--muted);width:100%;font-family:PxPlus IBM VGA8;outline:none}
  .auth-btn{margin-top:12px;padding:10px 16px;border-radius:6px;background:transparent;border:1px solid rgba(255,255,255,0.06);cursor:pointer;color:inherit}
  .fade-out{animation:fadeOut 700ms ease forwards}
  @keyframes fadeOut{100%{opacity:0;transform:scale(0.98)}}

  .small-muted{font-size:12px;color:#6ea88b;margin-top:6px}
</style>
</head>
<body>
<!-- Overlay boot/login -->
<div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-label="Authentication">
  <div class="boot-box" role="document">
    <div class="boot-line" id="boot-line">root@admin&gt; <span id="boot-hash">################</span></div>
    <div class="boot-prompt">Enter password to unlock</div>
    <input id="boot-pwd" class="pwd-input" type="password" placeholder="password" onkeydown="if(event.key==='Enter')authTry()" aria-label="password">
    <div style="display:flex;gap:8px;justify-content:center">
      <button class="auth-btn" onclick="authTry()">Unlock</button>
    </div>
    <div class="small-muted">This is a simulated login for demo purposes only.</div>
  </div>
</div>

<div class="app" role="application" aria-label="Demo C2 Terminal UI — Safe Demo">
  <div class="topbar">
    <div class="logo"><div class="dot"></div>TERMINAL • Demo</div>
    <div class="muted">Mode: <strong>Read-only demo</strong></div>
    <div class="top-actions">
      <div class="status-pill">Agents: <span id="count-agents">0</span></div>
      <button class="btn" onclick="toast('Exported (demo)')">Export</button>
      <button class="btn" onclick="toast('Settings not available in demo')">Settings</button>
    </div>
  </div>

  <!-- LEFT: sidebar with search + task-manager style res -->
  <aside class="sidebar" aria-label="Filters and system resources">
    <h3>Filters</h3>
    <div class="search"><input id="search" placeholder="Search agent / host..." oninput="renderAgents()" /></div>
    <div class="filter">
      <div><button class="chip" onclick="setFilter('all')">All</button> <button class="chip" onclick="setFilter('online')">Online</button> <button class="chip" onclick="setFilter('offline')">Offline</button></div>
      <div style="margin-top:8px">
        <div class="muted">Tags</div>
        <div style="display:flex;flex-wrap:wrap;gap:6px;margin-top:6px">
          <button class="chip" onclick="toggleTag('prod')">prod</button>
          <button class="chip" onclick="toggleTag('lab')">lab</button>
          <button class="chip" onclick="toggleTag('linux')">linux</button>
          <button class="chip" onclick="toggleTag('win')">win</button>
        </div>
      </div>
    </div>

    <!-- Task-Manager style system resources -->
    <div class="sys-res" id="sys-res">
      <div class="title"><div>System Resources</div><div id="resource-updated">updated: --</div></div>
      <div class="res-agg">
        <div style="display:flex;justify-content:space-between;margin-top:10px">
          <div class="muted">Overall CPU</div><div id="agg-cpu-text" class="muted">0%</div>
        </div>
        <div class="bar-bg" style="margin-top:6px"><div id="agg-cpu" class="bar-fill" style="width:0%"></div></div>

        <div style="display:flex;justify-content:space-between;margin-top:8px">
          <div class="muted">Overall MEM</div><div id="agg-mem-text" class="muted">0%</div>
        </div>
        <div class="bar-bg" style="margin-top:6px"><div id="agg-mem" class="bar-fill bar-fill-mem" style="width:0%"></div></div>
      </div>

      <div style="margin-top:12px;font-weight:600;color:#9fffb1">Agents</div>
      <div id="agents-res-list" style="margin-top:6px">
        <!-- populated by JS: per-agent rows -->
      </div>

      <div style="margin-top:10px;font-weight:600;color:#9fffb1">Processes (selected)</div>
      <table class="proc-table" id="proc-table" role="table" aria-label="Process list">
        <thead><tr><th class="proc-pid">PID</th><th>Name</th><th class="proc-cpu">CPU</th><th class="proc-mem">MEM</th></tr></thead>
        <tbody id="proc-body">
          <!-- simulated -->
        </tbody>
      </table>
    </div>

    <div class="mini" style="margin-top:12px">
      <div class="muted">Quick Actions (simulated)</div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button class="btn" onclick="simulateTask('health-check')">Health Check</button>
        <button class="btn" onclick="simulateTask('collect-logs')">Collect Logs</button>
      </div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main" id="main" aria-live="polite">
    <div class="panel-title">
      <h2>Agents</h2>
      <div class="muted" style="margin-left:12px">Click a row to view details</div>
    </div>

    <table class="agents-table" id="agents-table" role="table" aria-label="Agent list">
      <thead>
        <tr><th>Host</th><th>IP</th><th>OS</th><th>Last Check-in</th><th>Task</th></tr>
      </thead>
      <tbody id="agents-body"></tbody>
    </table>

    <div id="agent-detail" class="mini" style="margin-top:16px;display:none">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div><strong id="detail-host">host</strong> <span class="muted" id="detail-status">[online]</span></div>
        <div class="muted" id="detail-last">last</div>
      </div>

      <div style="display:flex;gap:12px;margin-top:10px">
        <div style="flex:1">
          <div class="kv"><div>OS</div><div id="detail-os">Linux</div></div>
          <div class="kv"><div>Architecture</div><div id="detail-arch">x86_64</div></div>
          <div class="kv"><div>CPU</div><div id="detail-cpu">2 cores</div></div>
        </div>
        <div style="flex:1">
          <div class="kv"><div>MEM</div><div id="detail-mem">2.1 GB</div></div>
          <div class="kv"><div>IP</div><div id="detail-ip">127.0.0.1</div></div>
          <div class="kv"><div>Tags</div><div id="detail-tags">lab</div></div>
        </div>
      </div>

      <div style="margin-top:10px;display:flex;gap:8px">
        <button class="btn" onclick="simulateTask('run-script')">Run Script (simulated)</button>
        <button class="btn" onclick="simulateTask('restart-service')">Restart Service (simulated)</button>
      </div>
    </div>
  </main>

  <!-- RIGHT -->
  <aside class="right" aria-label="Terminal and logs">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div style="font-weight:600;color:var(--muted)">Terminal</div>
      <div class="muted">Demo output</div>
    </div>

    <div class="terminal" id="terminal" aria-live="polite" role="log">
      <div class="line" style="color:#7aff8d">[demo] terminal initialized <span class="cursor"></span></div>
    </div>

    <div class="input-row">
      <input class="cmd-input" id="cmd" placeholder="type demo command (e.g. status agents)" onkeydown="if(event.key==='Enter')runCmd();" />
      <button class="run-btn" onclick="runCmd()">▶</button>
    </div>

    <div class="mini" style="margin-top:12px">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div class="muted">Summary</div>
        <div id="summary-online" class="muted">0 online</div>
      </div>
    </div>

    <!-- small note -->
    <div class="mini" style="margin-top:12px">
      <div class="muted">Notes</div>
      <div style="font-size:12px;margin-top:6px">All data is simulated for UI/demo use only. No network calls.</div>
    </div>
  </aside>
</div>

<script>
/* Demo C2 UI (frontend-only). No networking. All state is simulated client-side. */

const agents = [
  {id:'A-01', host:'alpha', ip:'10.0.1.12', os:'Ubuntu 22.04', last:'2025-11-24 18:03', task:'idle', status:'online', cpu:18, mem:32, cpuCores:4, arch:'x86_64', tags:['lab','linux']},
  {id:'B-02', host:'bravo', ip:'10.0.1.25', os:'Windows 10', last:'2025-11-24 17:52', task:'collecting', status:'online', cpu:42, mem:61, cpuCores:8, arch:'x64', tags:['prod','win']},
  {id:'C-03', host:'charlie', ip:'10.0.2.7', os:'Debian 12', last:'2025-11-23 09:12', task:'idle', status:'offline', cpu:6, mem:12, cpuCores:2, arch:'arm64', tags:['lab','linux']},
  {id:'D-04', host:'delta', ip:'10.0.3.3', os:'CentOS 7', last:'2025-11-24 20:06', task:'patching', status:'online', cpu:63, mem:54, cpuCores:4, arch:'x86_64', tags:['prod','linux']},
];

let activeFilter = 'all';
let activeTags = new Set();
let selectedAgent = null;

function el(q){ return document.querySelector(q) }
function els(q){ return Array.from(document.querySelectorAll(q)) }

/* ---------- Render agents list ---------- */
function renderAgents(){
  const tbody = el('#agents-body');
  tbody.innerHTML = '';
  const q = el('#search').value.trim().toLowerCase();
  const filtered = agents.filter(a=>{
    if(activeFilter==='online' && a.status!=='online') return false;
    if(activeFilter==='offline' && a.status!=='offline') return false;
    if(activeTags.size>0 && ![...activeTags].every(t=>a.tags.includes(t))) return false;
    if(q && !(`${a.host} ${a.ip} ${a.os} ${a.id}`).toLowerCase().includes(q)) return false;
    return true;
  });
  filtered.forEach(a=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td><span class="status-dot ${a.status==='online'?'online':'offline'}"></span>${a.host} <span class="muted">(${a.id})</span></td>
                    <td>${a.ip}</td><td>${a.os}</td><td>${a.last}</td><td>${a.task}</td>`;
    tr.onclick = ()=>selectAgent(a);
    tbody.appendChild(tr);
  });
  el('#count-agents').textContent = filtered.length;
  el('#summary-online').textContent = `${agents.filter(a=>a.status==='online').length} online`;
  renderAgentsResources();
}

/* ---------- Render system resources (task-manager style) ---------- */
function renderAgentsResources(){
  const list = el('#agents-res-list');
  list.innerHTML = '';
  // overall aggregates (simple average)
  const onlineAgents = agents.filter(a=>a.status==='online');
  const aggCpu = Math.round(onlineAgents.reduce((s,a)=>s+a.cpu,0) / Math.max(1,onlineAgents.length));
  const aggMem = Math.round(onlineAgents.reduce((s,a)=>s+a.mem,0) / Math.max(1,onlineAgents.length));
  el('#agg-cpu').style.width = aggCpu + '%';
  el('#agg-cpu-text').textContent = aggCpu + '%';
  el('#agg-mem').style.width = aggMem + '%';
  el('#agg-mem-text').textContent = aggMem + '%';
  el('#resource-updated').textContent = 'updated: ' + new Date().toLocaleTimeString('en-US',{hour12:false});

  agents.forEach(a=>{
    const row = document.createElement('div');
    row.className = 'agent-row';
    row.innerHTML = `<div class="agent-name"><div class="agent-mini-dot" style="background:${a.status==='online'?'#39ff14':'#6b6b6b'}"></div><div>${a.host} <span class="muted">(${a.id})</span></div></div>
                     <div style="width:40%"><div class="bar-bg"><div class="bar-fill" style="width:${a.cpu}%"></div></div>
                     <div class="muted" style="font-size:12px;margin-top:6px">${a.cpu}% CPU · ${a.mem}% MEM</div></div>`;
    row.onclick = ()=>selectAgent(a);
    list.appendChild(row);
  });
}

/* ---------- Agent selection ---------- */
function selectAgent(a){
  selectedAgent = a;
  el('#agent-detail').style.display='block';
  el('#detail-host').textContent = `${a.host} (${a.id})`;
  el('#detail-status').textContent = `[${a.status}]`;
  el('#detail-last').textContent = a.last;
  el('#detail-os').textContent = a.os;
  el('#detail-arch').textContent = a.arch;
  el('#detail-cpu').textContent = `${a.cpuCores} cores`;
  el('#detail-mem').textContent = `${a.mem}% used`;
  el('#detail-ip').textContent = a.ip;
  el('#detail-tags').textContent = a.tags.join(', ');
  appendLine(`[ui] selected ${a.host} (${a.id}) — status: ${a.status}`);
  renderProcessesForAgent(a);
}

/* ---------- Simulated processes (Task Manager feel) ---------- */
function renderProcessesForAgent(a){
  const tbody = el('#proc-body');
  tbody.innerHTML = '';
  // create a few fake processes, skewed by agent CPU
  const base = Math.max(3, Math.floor(a.cpu / 15) + 3);
  for(let i=0;i<base;i++){
    const pid = 1000 + Math.floor(Math.random()*4000);
    const names = ['systemd','node','python','chrome','sshd','mysqld','nginx','java','redis-server','java'];
    const name = names[Math.floor(Math.random()*names.length)];
    // give some processes larger share if agent CPU high
    const cpu = Math.max(0, Math.round((Math.random()* (a.cpu/1.5))));
    const mem = Math.max(0, Math.round((Math.random()* (a.mem/1.2))));
    const tr = document.createElement('tr');
    tr.innerHTML = `<td class="proc-pid">${pid}</td><td>${name}</td><td class="proc-cpu">${cpu}%</td><td class="proc-mem">${mem}%</td>`;
    tbody.appendChild(tr);
  }
}

/* ---------- Terminal / UI helpers ---------- */
function appendLine(txt, cls){
  const node = document.createElement('div');
  node.className = 'line';
  node.textContent = txt;
  if(cls) node.classList.add(cls);
  el('#terminal').appendChild(node);
  el('#terminal').scrollTop = el('#terminal').scrollHeight;
}
function toast(msg){ appendLine(`[ui] ${msg}`) }

/* ---------- Filters & tasks ---------- */
function setFilter(f){ activeFilter = f; renderAgents(); toast(`filter set: ${f}`); }
function toggleTag(tag){ if(activeTags.has(tag)) activeTags.delete(tag); else activeTags.add(tag); renderAgents(); toast(`tags: ${[...activeTags].join(', ') || 'none'}`); }
function simulateTask(action){
  appendLine(`[task] queued: ${action}`);
  let step = 0;
  const id = setInterval(()=>{
    step++;
    appendLine(`[task] ${action} — step ${step}/3`);
    if(step>=3){ clearInterval(id); appendLine(`[task] ${action} — completed (demo)`); }
  },700);
}

/* ---------- CLI in right terminal ---------- */
function runCmd(){
  const cmd = el('#cmd').value.trim();
  if(!cmd) return;
  appendLine(`$ ${cmd}`);
  el('#cmd').value='';
  if(cmd.startsWith('status')){
    appendLine(`[status] ${agents.length} agents known — ${agents.filter(a=>a.status==='online').length} online`);
  } else if(cmd.startsWith('list')){
    agents.slice(0,10).forEach(a=> appendLine(`${a.id}\t${a.host}\t${a.ip}\t${a.status}`));
  } else if(cmd.startsWith('help')){
    appendLine('help: demo commands: status, list, select <id>, clear');
  } else if(cmd.startsWith('select ')){
    const id = cmd.split(' ')[1];
    const a = agents.find(x=>x.id.toLowerCase()===id.toLowerCase() || x.host.toLowerCase()===id.toLowerCase());
    if(a) selectAgent(a); else appendLine(`[err] agent ${id} not found`);
  } else if(cmd==='clear'){ el('#terminal').innerHTML=''; }
  else { appendLine('[err] unknown command (demo). try "help"'); }
}

/* ---------- CPU/MEM simulation loop ---------- */
function updateResources() {
  // randomly nudge agent metrics for demo effect
  agents.forEach(a=>{
    // small random walk
    a.cpu = clamp(a.cpu + Math.floor(Math.random()*11)-5, 2, 92);
    a.mem = clamp(a.mem + Math.floor(Math.random()*9)-4, 5, 92);
  });
  renderAgentsResources();
  // if an agent is selected, refresh its processes (so values drift)
  if(selectedAgent) renderProcessesForAgent(selectedAgent);
}
function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }
setInterval(updateResources, 2000);

/* ---------- Initial render ---------- */
renderAgents();
appendLine('[demo] UI ready — this is a safe local demo. No network modules loaded.');

/* ---------- Boot/login overlay behavior ---------- */
const overlay = el('#overlay');
const bootLine = el('#boot-hash');
const pwdInput = el('#boot-pwd');

let bootHashAnimId = null;
function animateBootHash() {
  const patterns = ['################','############----','########----####','###----########','----############'];
  let i=0;
  bootHashAnimId = setInterval(()=>{
    bootLine.textContent = patterns[i % patterns.length];
    i++;
  }, 200);
}
animateBootHash();

function authTry(){
  // visual feedback
  if(bootHashAnimId) { clearInterval(bootHashAnimId); bootHashAnimId = null; }
  bootLine.textContent = 'Authenticating...';
  pwdInput.disabled = true;
  // random delay 1-3 seconds
  const delay = 1000 + Math.floor(Math.random()*2000);
  setTimeout(()=>{
    // success (demo)
    bootLine.textContent = 'root@admin> ##########';
    // fade overlay
    overlay.classList.add('fade-out');
    setTimeout(()=>{ overlay.style.display='none'; }, 700);
    // small welcome messages
    appendLine(`[auth] user admin authenticated (demo)`);
    appendLine(`[ui] loading dashboard...`);
  }, delay);
}

// allow Enter also
pwdInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ authTry(); }} );

/* Accessibility: if user clicks outside or presses Esc, still allow closing (demo) */
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ overlay.style.display='none'; appendLine('[auth] overlay dismissed (demo)'); } });

/* ---------- helper: simulate initial auth if user doesn't type after 3s ---------- */
let autoAuthTimeout = setTimeout(()=>{
  if(overlay.style.display!=='none'){ authTry(); }
}, 5000); // optional auto unlock after 5s if user doesn't act

</script>
</body>
</html>



